<div id="labelManagerControls">
  <label for="labelMode">Mode:</label>
<select id="labelMode">
  <option value="menu" />&#x1F4C1; Menu     <!-- ğŸ“ -->
  <option value="audit" />&#x1F9EA; Audit   <!-- ğŸ§ª -->
  <option value="cleanup" />&#x1F9F9; Cleanup <!-- ğŸ§¹ -->
</select>
</div>
<div id="labelManagerWidget"></div>
<style>#labelManagerWidget{font-family:system-ui,sans-serif;background:#fefefe;border:1px solid #ccc;padding:1rem;margin-top:1rem}#labelManagerWidget h3,h4{margin-top:1rem;color:#333}#labelManagerWidget details summary{font-weight:700;cursor:pointer;margin-top:.5rem}#labelManagerWidget details a{margin-left:1rem;text-decoration:none;color:#444}#labelManagerWidget ul{margin-left:1rem;padding-left:1rem}#labelManagerControls{margin-bottom:.5rem;font-family:system-ui,sans-serif}</style>
<script> document.addEventListener("DOMContentLoaded",(function(){!function(){const e={},n={},t={grouped:{},orphaned:[],misformatted:[],mergeCandidates:[]},o={};document.querySelectorAll(".label-name").forEach((t=>{const o=decodeURIComponent(t.href.split("/search/label/")[1]);e[o]=(e[o]||0)+1;const[a,d]=o.split("|");n[a]||(n[a]=[]),d&&n[a].push(d)})),Object.entries(e).forEach((([e,n])=>{const a=e.trim().replace(/\s+/g," ").toLowerCase();o[a]?t.mergeCandidates.push([e,o[a]]):o[a]=e,0===n&&t.orphaned.push(e),!e.includes("|")&&e.split(" ").length>3&&t.misformatted.push(e);const[d,r]=e.split("|");t.grouped[d]||(t.grouped[d]=[]),r&&t.grouped[d].push({sub:r,count:n})}));const a=document.getElementById("labelManagerWidget"),d=document.getElementById("labelMode");function r(e){if(a.innerHTML="","menu"===e&&(a.innerHTML="<h3>ğŸ“ Label Menu</h3>",Object.entries(n).forEach((([e,n])=>{const t=document.createElement("details"),o=document.createElement("summary");o.textContent=e,t.appendChild(o),n.forEach((n=>{const o=document.createElement("a");o.href=`/search/label/${encodeURIComponent(e+"|"+n)}`,o.textContent=n,o.style.display="block",t.appendChild(o)})),a.appendChild(t)}))),"audit"===e&&(a.innerHTML="<h3>ğŸ§ª Label Audit</h3>",Object.entries(t.grouped).forEach((([e,n])=>{const t=document.createElement("details"),o=document.createElement("summary");o.textContent=`${e} (${n.length})`,t.appendChild(o),n.forEach((({sub:e,count:n})=>{const o=document.createElement("div");o.textContent=`â†³ ${e} (${n})`,t.appendChild(o)})),a.appendChild(t)}))),"cleanup"===e){if(a.innerHTML="<h3>ğŸ§¹ Cleanup Suggestions</h3>",t.mergeCandidates.length){const e=t.mergeCandidates.map((([e,n])=>`<li>Merge <strong>${e}</strong> into <strong>${n}</strong></li>`)).join("");a.innerHTML+=`<h4>ğŸ” Merge Candidates</h4><ul>${e}</ul>`}if(t.orphaned.length){const e=t.orphaned.map((e=>`<li>Remove unused label: <strong>${e}</strong></li>`)).join("");a.innerHTML+=`<h4>ğŸš« Orphaned Labels</h4><ul>${e}</ul>`}if(t.misformatted.length){const e=t.misformatted.map((e=>`<li>Fix formatting: <strong>${e}</strong></li>`)).join("");a.innerHTML+=`<h4>âš ï¸ Misformatted Labels</h4><ul>${e}</ul>`}}}r(d.value),d.addEventListener("change",(()=>{r(d.value)}))}()}));</script>
